!function(e,a,n,t,c,s,i){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=a.createElement(n),i=a.getElementsByTagName(n)[0],s.async=1,s.src=t,i.parentNode.insertBefore(s,i)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-35105714-2","hirewire.lk"),ga("send","pageview");
"use strict";var app=angular.module("kodiak",["kodiak.filters","kodiak.services","kodiak.directives","kodiak.controllers","ui.router","ui.bootstrap","ngStorage","ui.slider","textAngular","ngSanitize","chieffancypants.loadingBar","ngGrid","autocomplete","pasvaz.bindonce"]);app.config(function(t,a){t.defaults.useXDomain=!0,a.factory("errorHandler",function(t,a,e,r){return{responseError:function(r){return 401===r.status&&"/login"!==a.$$path?(a.url("/login?to="+encodeURIComponent(a.$$url)),r.data={message:"You need to log in first"}):r.data.message&&e.handleError(r.data.message),t.reject(r)},request:function(t){return r.u?(t.headers.Authorization="Bearer "+r.u.access_token,t):void 0}}}),t.interceptors.push("errorHandler")}),app.config(function(t,a,e,r){r.includeSpinner=!0,a.otherwise("/"),t.state("home",{url:"/",templateUrl:"partials/landing.html",controller:"LandingCtrl",data:{"public":!0}}),t.state("signup",{url:"/signup?token",templateUrl:"partials/signup.html",controller:"SignupCtrl",data:{"public":!0}}),t.state("login",{url:"/login?to",templateUrl:"partials/login.html",controller:"LoginCtrl",data:{"public":!0}}),t.state("activate",{url:"/activate?email&token&resetrequired",templateUrl:"partials/activate.html",controller:"ActivateCtrl",data:{"public":!0}}),t.state("myApplications",{url:"/me/applications",templateUrl:"partials/dashboard_me.html",controller:"MeDashboardCtrl",data:{"public":!1}}),t.state("jobBoard",{url:"/ads",templateUrl:"partials/ads_public.html",controller:"JobBoardCtrl",data:{"public":!1}}),t.state("editProfile",{url:"/me/edit",templateUrl:"partials/me.html",controller:"MeCtrl",data:{"public":!1}}),t.state("viewProfile",{url:"/me",templateUrl:"partials/me.html",controller:"MeCtrl",data:{"public":!1}}),t.state("viewProfileForOrg",{url:"/user/:name/:userId",templateUrl:"partials/me.html",controller:"OrgMeCtrl",data:{"public":!1}}),t.state("viewProfilePrivate",{url:"/me/private",templateUrl:"partials/private_me.html",controller:"PrivateMeCtrl",data:{"public":!1}}),t.state("createOrganization",{url:"/organization/create",templateUrl:"partials/organization_create.html",controller:"CreateOrgCtrl",data:{"public":!1}}),t.state("organizationDashboard",{url:"/organization/dashboard",templateUrl:"partials/dashboard_org.html",controller:"ViewOrgCtrl",data:{"public":!1}}),t.state("campaignHome",{url:"/organization/campaign/:adId",templateUrl:"partials/campaign_home.html",controller:"ViewCampaignCtrl",data:{"public":!1}}),t.state("createAdvertisement",{url:"/organization/ad/create",templateUrl:"partials/ad_create.html",controller:"AdCtrl",data:{"public":!1}}),t.state("viewAdvertisement",{url:"/organization/ad/{adId}/view",templateUrl:"partials/ad_view.html",controller:"ViewAdCtrl",data:{"public":!1}}),t.state("viewAdvertisementPublic",{url:"/organization/{orgId}/post/{adId}/public?from",templateUrl:"partials/post_view_public.html",controller:"ViewPublicAdCtrl",data:{"public":!0}}),t.state("editAdvertisement",{url:"/organization/ad/{adId}/edit",templateUrl:"partials/ad_create.html",controller:"AdCtrl",data:{"public":!1}}),t.state("search",{url:"/organization/ad/{adId}/search",templateUrl:"partials/search.html",controller:"SearchCtrl",data:{"public":!1}}),t.state("results",{url:"/organization/ad/{adId}/search/{searchId}/results",templateUrl:"partials/results.html",controller:"SearchResultsCtrl",data:{"public":!1}}),t.state("logout",{url:"/logout",templateUrl:"partials/logout.html",controller:"LogoutCtrl",data:{"public":!0}}),t.state("changePassword",{url:"/me/changepassword?token",templateUrl:"partials/change_password.html",controller:"ChangePasswordCtrl",data:{"public":!0}}),t.state("resetPassword",{url:"/resetpassword",templateUrl:"partials/reset_password.html",controller:"ResetPasswordCtrl",data:{"public":!0}}),t.state("editOrganization",{url:"/organization/edit",templateUrl:"partials/organization_create.html",controller:"EditOrgCtrl",data:{"public":!1}}),t.state("viewOrganization",{url:"/organization/:orgId/view",templateUrl:"partials/organization_view.html",controller:"ViewOrgProfileCtrl",data:{"public":!0}}),t.state("termsOfService",{url:"/tos",templateUrl:"partials/tos.html",data:{"public":!0}}),t.state("privacyPolicy",{url:"/pp",templateUrl:"partials/pp.html",data:{"public":!0}}),t.state("contact",{url:"/contact",templateUrl:"partials/contact.html",data:{"public":!0}}),t.state("admin",{url:"/admin",templateUrl:"partials/admin.html",controller:"AdminCtrl",data:{"public":!1}}),t.state("adminUsers",{url:"/admin/users",templateUrl:"partials/admin_users.html",controller:"AdminUsersCtrl",data:{"public":!1}}),t.state("adminInvites",{url:"/admin/invites",templateUrl:"partials/admin_invites.html",controller:"AdminInvitesCtrl",data:{"public":!1}}),t.state("profileBuilder",{url:"/me/builder",templateUrl:"partials/builder.html",controller:"ProfileBuilderCtrl",data:{"public":!1}}),t.state("inviteRequested",{url:"/inviteRequested/:referrer",templateUrl:"partials/invite_requested.html",controller:"FriendShareCtrl",data:{"public":!0}}),t.state("signupCompleted",{url:"/signup/completed",templateUrl:"partials/signup_completed.html",data:{"public":!0}})}),app.run(function(t,a,e,r,l){t.$on("restorestate",a.restoreState),t.$on("refreshNotifications",function(){a.isLoggedIn()&&e.getAllNotifications().success(function(a){t.notifications=a.notifications}).error(function(t){r.handleError(t.message)})}),t.$on("$stateChangeStart",function(t,e){e.data&&(!e.data||e.data.public!==!1)||a.isLoggedIn()||(t.preventDefault(),l.transitionTo("login",{to:encodeURIComponent(e.url)}))}),t.$broadcast("restorestate"),t.$broadcast("refreshNotifications")});
+function(t){"use strict";var e=function(s,n){this.$element=t(s),this.options=t.extend({},e.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var s=this.$parent&&this.$parent.find("> .panel > .in");if(s&&s.length){var n=s.data("bs.collapse");if(n&&n.transitioning)return;s.collapse("hide"),n||s.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",i].join("-"));this.$element.one(t.support.transition.end,t.proxy(a,this)).emulateTransitionEnd(350)[i](this.$element[0][l])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var s=this.dimension();this.$element[s](this.$element[s]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[s](0).one(t.support.transition.end,t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var s=t.fn.collapse;t.fn.collapse=function(s){return this.each(function(){var n=t(this),i=n.data("bs.collapse"),a=t.extend({},e.DEFAULTS,n.data(),"object"==typeof s&&s);!i&&a.toggle&&"show"==s&&(s=!s),i||n.data("bs.collapse",i=new e(this,a)),"string"==typeof s&&i[s]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=s,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var s,n=t(this),i=n.attr("data-target")||e.preventDefault()||(s=n.attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,""),a=t(i),l=a.data("bs.collapse"),o=l?"toggle":n.data(),r=n.attr("data-parent"),h=r&&t(r);l&&l.transitioning||(h&&h.find('[data-toggle=collapse][data-parent="'+r+'"]').not(n).addClass("collapsed"),n[a.hasClass("in")?"addClass":"removeClass"]("collapsed")),a.collapse(o)})}(jQuery);
var configs=angular.module("kodiak.configs",[]);configs.constant("GRIZZLY_URL","http://localhost:8000"),configs.constant("MONTHS",["January","February","March","April","May","June","July","August","September","October","November","December"]);
var configs=angular.module("kodiak.configs",[]);configs.constant("GRIZZLY_URL","https://lentil-grizzly.herokuapp.com"),configs.constant("MONTHS",["January","February","March","April","May","June","July","August","September","October","November","December"]);
var configs=angular.module("kodiak.configs",[]);configs.constant("GRIZZLY_URL","https://lentil-grizzly-stg.herokuapp.com"),configs.constant("MONTHS",["January","February","March","April","May","June","July","August","September","October","November","December"]);
"use strict";var controllers=angular.module("kodiak.controllers",["kodiak.configs"]);controllers.controller("SignupCtrl",function(e,t,n,a,i,o,s,r){e.user={},e.user.token=r.token,e.create=function(t){try{i.mustBeTrue(e.user.firstName&&e.user.lastName,"First and last names are required"),i.mustBeTrue(e.user.email,"Your e-mail address is required"),i.mustBeTrue(e.user.password&&e.user.password.length>=8,"Your password must be at least 8 characters"),i.mustBeTrue(e.user.password===e.user.passwordConfirmation,"Your password and password confirmation do not match")}catch(n){return}a.create(t).success(function(){o.handleSuccess("Account created. But you will have to login to your email and click the activation link first.");var e={};e.pixel_id="6012934240312",e.value="0.01",e.currency="USD",function(){var e=document.createElement("script");e.async=!0,e.src="//connect.facebook.net/en_US/fp.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),s.go("signupCompleted")})}}),controllers.controller("LoginCtrl",["$scope","$http","$location","userService","notificationService","$rootScope","$state","$stateParams","validationService",function(e,t,n,a,i,o,s,r,c){e.user={},r.to&&i.handleInfo("You need to login first."),e.$watch("user.rememberMe",function(e){e&&i.handleInfo("Please do not select this option if other people use this device.","Warning!")}),e.login=function(t){try{c.mustBeTrue(t.email,"E-mail should be a valid e-mail address"),c.mustBeTrue(t.password,"Password is required")}catch(l){if(track("login error for email:{"+$("#login-email").val()+"} length:"+$("#login-password").val().length+" credentials:"+JSON.stringify(t)+" $scope.user:"+JSON.stringify(e.user)),!($("#login-email").val()&&$("#login-password").val().length>0))return;t.email=$("#login-email").val(),t.password=$("#login-password").val(),track("corrected the login issue, credentials set: "+t)}a.login(t,function(e,t){e?401===e?i.notify({title:"Invalid e-mail address/password!",text:"Please try again",type:"error",hide:!0}):403===e&&i.notify({title:"Account is inactive!",text:"This account is currently inactive. If you just signed up, please click the activation link we sent to your email.",type:"error",hide:!0}):(o.$broadcast("refreshNotifications"),r.to?n.url(decodeURIComponent(r.to)):s.go(t.affiliation?"organizationDashboard":"viewProfile"))})}}]),controllers.controller("ActivateCtrl",["$scope","$http","$stateParams","userService","notificationService","$state",function(e,t,n,a,i){e.user={token:n.token},e.submit=function(){if("true"===n.resetRequired){if(e.pass1.length<8)return void i.handleError("Your new password must contain at least 8 characters");if(e.pass1!==e.pass2)return void i.handleError("Password and password confirmation must match")}e.user.password=e.pass1,a.activate(e.user).success(function(){i.handleSuccess("Your account had been activated successfully. Please log in"),e.success=!0})},"true"===n.resetrequired?e.showPasswordReset=!0:e.submit()}]),controllers.controller("PersonalModalInstanceCtrl",function(e,t,n,a){e.data=angular.copy(t,e.data),e.dateOfBirth={},e.months=a,e.years=[];for(var i=moment().year(),o=i-15;o>=i-70;o--)e.years.push(o.toString());if(e.data.dateOfBirth){var s=e.data.dateOfBirth=moment(new Date(e.data.dateOfBirth));e.dateOfBirth={},e.dateOfBirth.year=s.format("YYYY"),e.dateOfBirth.month=s.format("MMMM"),e.dateOfBirth.date=s.format("DD")}e.submit=function(){try{if(e.dateOfBirth.year||e.dateOfBirth.month||e.dateOfBirth.date){var t=moment(e.dateOfBirth.date+"-"+e.dateOfBirth.month+"-"+e.dateOfBirth.year,"DD-MMMM-YYYY");n.mustBeTrue(t.isValid(),"Date of birth is invalid"),e.data.dateOfBirth=new Date(t.format())}e.data.contactNumber&&n.mustBeTrue(e.data.contactNumber.length>=10,"Contact Number should have 10 digits at least")}catch(a){return}e.$close(e.data)}}),controllers.controller("QualificationTenureModalInstanceCtrl",function(e,t,n,a,i){e.data=angular.copy(t,e.data),e.meta=t.meta,e.startedOn={},e.endedOn={},e.months=n,e.years=[],e.queried={qualifications:[],qualificationFields:[]},e.updateQualificationsQuery=function(t){t.length<2||i.getQualifications(t).success(function(t){e.queried.qualifications=t.results})},e.updateQualificationFieldsQuery=function(t){t.length<2||i.getQualificationFields(t).success(function(t){e.queried.qualificationFields=t.results})},e.changeEndDate=function(){e.data.current?(e.endedOn=null,e.data.endedOn=null):e.data.endedOn=e.endedOn};for(var o=moment().year(),s=o;s>=o-40;s--)e.years.push(s.toString());var r=function(e,t){t.month=moment(e).format("MMMM"),t.year=moment(e).format("YYYY")};e.data.startedOn&&r(e.data.startedOn,e.startedOn),e.data.endedOn?(r(e.data.endedOn,e.endedOn),e.data.current=!1):e.data.current=!0;var c=function(e,t){return e&&t?moment(t+" 1 "+e).format():void 0};e.submit=function(t){e.data.startedOn=c(e.startedOn.year,e.startedOn.month),(!e.data.current||e.data.complete)&&(e.data.endedOn=c(e.endedOn.year,e.endedOn.month));try{"q"===t?(a.mustBeTrue(e.data.name,"Qualification name should be defined"),a.mustBeTrue(e.data.issuedBy,"Issued School/University/Institute should be defined"),e.data.complete&&a.mustBeTrue(e.data.startedOn<=e.data.endedOn,"Start date should be before the end date")):(a.mustBeTrue(e.data.position,"Your position must be defined"),a.mustBeTrue(e.data.organization,"The organization you worked at must be defined"),e.data.current||a.mustBeTrue(e.data.startedOn<=e.data.endedOn,"Start date should be before the end date")),a.mustBeTrue(e.data.startedOn,"Started month should be defined")}catch(n){return}e.$close(e.data)}}),controllers.controller("SkillModalInstanceCtrl",["$scope","data",function(e,t){e.data=angular.copy(t,e.data),e.examples=["Fixed Asset Accounting","Nuclear Physics","Recruitment and Selection","Javascript","Negative Asset Management"]}]),controllers.controller("CVUploadCtrl",function(e,t,n){e.uploadFile=function(a){t.uploadCv(a).success(function(t){n.handleSuccess("CV Uploaded and analyzed successfully."),e.$close(t.profile)}).error(function(){e.$dismiss()})}}),controllers.controller("PrivateMeCtrl",function(e,t,n){t.getProfile(n.u._id).success(function(t){e.user=t,e.forEmployer=!0})}),controllers.controller("MeCtrl",function(e,t,n,a,i,o,s,r,c){e.edit=r.is("editProfile")?!0:!1,e.enableEdit=function(){e.edit=!0},e.disableEdit=function(){e.edit=!1},e.getTimes=s.getTimes;var l=function(){i.getProfileStats().success(function(t){e.stats=t})};i.getProfile().success(function(t){if(e.user=t,c.tempProfile){var n=angular.fromJson(c.tempProfile);e.user.tenures=n.tenures,e.user.skills=n.skills,e.user.qualifications=n.qualifications,e.user.dateOfBirth=n.dateOfBirth,e.saveProfile(),e.edit=!0}0===t.tenures.length&&0===t.qualifications.length&&0===t.skills.length&&e.edit===!1&&r.go("profileBuilder")}),l();var u=function(t,n,i,o){var s=t||{},r=a.open({templateUrl:n,controller:i,resolve:{data:function(){return s}}});r.result.then(function(n){t?o[o.indexOf(t)]=n:o.push(n),e.saveProfile()})};e.convertGender=function(e){return e?"Male":e===!1?"Female":void 0},e.saveProfile=function(){i.saveProfile(e.user).success(function(t){l(),o.notify({title:"Change(s) saved!",text:"Successfully saved change(s) made to your profile.",type:"success",hide:!0}),e.user=t.profile,c.tempProfile&&delete c.tempProfile}).error(function(t){t.profile&&(e.user=t.profile),c.tempProfile=angular.toJson(t.profile)})},e.openPersonalModal=function(t){var n=a.open({templateUrl:"partials/modal_me_personal.html",controller:"PersonalModalInstanceCtrl",resolve:{data:function(){return{location:t.location,contactNumber:t.contactNumber,languages:t.languages,nationalIdentifier:t.nationalIdentifier,dateOfBirth:t.dateOfBirth,gender:t.gender}}}});n.result.then(function(n){t.location=n.location,t.contactNumber=n.contactNumber,t.languages=n.languages,t.nationalIdentifier=n.nationalIdentifier,n.dateOfBirth&&(t.dateOfBirth=new Date(n.dateOfBirth)),t.gender=n.gender,e.saveProfile()})},e.openUploadCVModal=function(){var t=a.open({templateUrl:"partials/modal_me_cv.html",controller:"CVUploadCtrl"});t.result.then(function(t){e.cvUploaded=!0,e.user.location=t.location,e.user.contactNumber=t.contactNumber,e.user.qualifications=t.qualifications,e.user.tenures=t.tenures,e.user.skills=t.skills,e.edit=!0,e.saveProfile()})},e.openQualificationModal=function(t){u(t,"partials/modal_me_qualification.html","QualificationTenureModalInstanceCtrl",e.user.qualifications)},e.openTenureModal=function(t){u(t,"partials/modal_me_tenure.html","QualificationTenureModalInstanceCtrl",e.user.tenures)},e.openSkillModal=function(){var t=a.open({templateUrl:"partials/modal_me_skill.html",controller:"SkillModalInstanceCtrl",resolve:{data:function(){return{skills:e.user.skills}}}});t.result.then(function(t){e.user.skills=t,e.saveProfile()})},e.openDeleteModal=function(t,n){var i=a.open({templateUrl:"partials/modal_me_confirmation.html"});i.result.then(function(){n.splice(n.indexOf(t),1),e.saveProfile()})}}),controllers.controller("CreateOrgCtrl",["$scope","$http","orgService","$location","userService","notificationService",function(e,t,n,a,i,o){e.submit=function(e,t){n.createOrg(e).success(function(e){o.notify({title:"Success!",text:"Organization Created",type:"success",hide:!0});var n={firstName:t.name,email:t.email,affiliation:e.organization._id};i.createOrgUser(n).success(function(){o.handleSuccess("Please check your e-mail inbox and click the confirmation link, please","Admin account created!")})})}}]),controllers.controller("EditOrgCtrl",["$scope","orgService","$rootScope","notificationService","GRIZZLY_URL","userService","$state",function(e,t,n,a,i){e.editMode=!0,t.getOrg(n.u.affiliation).success(function(t){e.org=t.organization}),e.notReady=!0,e.uploadFile=function(e){var i=new Image;i.src=window.URL.createObjectURL(e[0]),i.onload=function(){400===i.naturalWidth&&300===i.naturalHeight?t.uploadLogo(n.u.affiliation,e).success(function(){a.handleSuccess("Logo uploaded successfully")}):a.handleError("Your logo should have a 400px width and a 300px height"),window.URL.revokeObjectURL(i.src)}},e.submit=function(e){t.editOrg(n.u.affiliation,e).success(function(){a.handleSuccess("Organization details updated"),i.go("organizationDashboard")})}}]),controllers.controller("ViewOrgCtrl",["$scope","userService","orgService","$rootScope","notificationService","$modal",function(e,t,n,a,i,o){e.currentUserId=a.u._id;var s=function(){n.getUsers(a.u.affiliation).success(function(t){e.users=t.users})};n.getAds(a.u.affiliation).success(function(t){e.org={_id:a.u.affiliation},e.campaigns=t.advertisements}),s(),e.openUserDeleteModal=function(t){var a=o.open({templateUrl:"partials/modal_org_user_delete_confirmation.html"});a.result.then(function(){n.deactivateUser(e.org._id,t).success(function(){i.handleSuccess("User was deactivated"),s()})})},e.openCreateUserModal=function(){var e=o.open({templateUrl:"partials/modal_org_user_create.html"});e.result.then(function(e){var n={firstName:e.name,email:e.email,affiliation:a.u.affiliation};t.createOrgUser(n).success(function(){i.handleSuccess("User account created. We have sent an email notifying the new user")})})}}]),controllers.controller("ViewCampaignCtrl",["$scope","userService","orgService","$rootScope","notificationService","adService","$stateParams","searchService","adResponseService",function(e,t,n,a,i,o,s,r,c){e.selectedCandidate=[],e.forEmployer=!0,e.gridOptions={data:"responses",showGroupPanel:!0,selectedItems:e.selectedCandidate,multiSelect:!1,showFilter:!0,showColumnMenu:!0,columnDefs:[{field:"name",displayName:"Name",width:"*"},{field:"status",displayName:"Status",width:"*"},{field:"updated",displayName:"Last Updated",width:"*"},{field:"tags",displayName:"Tags",width:"**"},{field:"id",displayName:"ID",visible:!1,width:"*"}]},e.$watch("selectedCandidate[0]",function(){0!==e.selectedCandidate.length&&(e.data={},t.getProfile(e.selectedCandidate[0].user).success(function(t){e.user=t}))}),o.getAd(a.u.affiliation,s.adId).success(function(t){e.ad=t.advertisement,e.ad.name=e.ad.jobRole+"-"+moment(e.ad.createdOn).format("MMM DD")});var l=function(){c.getAllResponses(a.u.affiliation,s.adId).success(function(t){e.responses=_.map(t.responses,function(e){return{id:e._id,user:e.user._id?e.user._id:e.user,name:e.user.lastName?e.user.firstName+" "+e.user.lastName:e.user.limitedName,status:e.status,updated:moment(e.lastUpdatedOn).fromNow(),tags:e.tags&&e.tags.join(", ")}})})};l(),e.save=function(e,t,n){c.editResponse(a.u.affiliation,s.adId,e.id,t,n).success(function(){i.handleSuccess("Successfully updated the candidate"),l()})}}]),controllers.controller("AdCtrl",["$scope","orgService","userService","adService","notificationService","$location","$stateParams","$state","$rootScope",function(e,t,n,a,i,o,s,r,c){t.getOrg(c.u.affiliation).success(function(t){e.org=t.organization}),e.ad={},e.ad.questions=[],e.today=moment().format("YYYY-MM-DD"),e.maxDate=moment().add("weeks",4).format("YYYY-MM-DD"),r.is("editAdvertisement")?(e.heading="Edit Advertisement",a.getAd(c.u.affiliation,s.adId).success(function(t){e.ad=t.advertisement;var n=e.ad.questions;e.ad.questions=[],_.each(n,function(t){e.ad.questions.push({value:t})}),e.ad.expiredOn=new Date(e.ad.expiredOn),e.postedOn=moment().calendar(),e.expiresOn=function(){return moment(e.ad.expiredOn).calendar()}})):(e.heading="Create Advertisement",e.postedOn=moment().calendar(),e.expiresOn=function(){return moment(e.ad.expiredOn).calendar()}),e.addElement=function(e){e.push({})},e.removeElement=function(e,t){e.splice(t,1)},e.submit=function(t){t.questions=_.pluck(e.ad.questions,"value"),r.is("createAdvertisement")?a.createAd(c.u.affiliation,t).success(function(e){r.go("campaignHome",{adId:e.id})}):a.editAd(c.u.affiliation,e.ad.id,t).success(function(){r.go("organizationDashboard")})}}]),controllers.controller("ViewAdCtrl",["$scope","orgService","adService","$stateParams","userService","notificationService","$rootScope",function(e,t,n,a,i,o,s){e.org={},e.ad={},n.getAd(s.u.affiliation,a.adId).success(function(t){e.ad=t.advertisement}),t.getOrg(s.u.affiliation).success(function(t){e.org=t.organization})}]),controllers.controller("ViewPublicAdCtrl",["$scope","orgService","adService","$stateParams","userService","notificationService","adResponseService","$rootScope",function(e,t,n,a,i,o,s,r){e.org={},e.ad={},e.apply=function(){s.createResponse(r.u._id,e.org._id,e.ad._id,null).success(function(){o.handleSuccess("Saved your application successfully"),e.status="applied"})};var c=function(t){t(a.orgId,a.adId).success(function(t){e.ad=t.advertisement})};"email"===a.from?(e.status="invited",c(n.getAd)):i.isLoggedIn()?i.getResponses().success(function(t){if(t.responses.length>0){var i=_.find(t.responses,function(e){return e.advertisement._id===a.adId});i?(e.status=i.status,c(n.getAd)):c(n.getAdPublic)}else c(n.getAdPublic)}):c(n.getAdPublic),t.getOrg(a.orgId).success(function(t){e.org=t.organization})}]),controllers.controller("SearchCtrl",function(e,t,n,a,i,o,s,r,c,l,u,d){e.displayNameCollection={AGE_BETWEEN:{name:"Age between",isRange:!0,type:"number",placeholder:["from","to"]},TOTAL_EXPERIENCE_BETWEEN:{name:"Total experience between",isRange:!0,type:"number",placeholder:["from","to"]},CURRENT_POSITION_LIKE:{name:"Current position like",isRange:!1,type:"string",placeholder:[]},EXPERIENCE_LIKE:{name:"Experienced in",isRange:!1,type:"string",placeholder:[]},QUALIFICATIONS_LIKE:{name:"Qualifications include",isRange:!1,type:"string",placeholder:[]},QUALIFICATIONS_FIELD_LIKE:{name:"Qualified in",isRange:!1,type:"string",placeholder:[]},SKILLS_LIKE:{name:"Skills include",isRange:!1,type:"string",placeholder:[]}},e.ad=null,e.searchId=n.searchId,e.searchCreated=!1,o.getSearchForAd(t.u.affiliation,n.adId).success(function(t){e.search=t.search,f()}).error(function(){i.getAd(t.u.affiliation,n.adId).success(function(n){if(!e.searchCreated){e.searchCreated=!0,e.ad=n.advertisement;var a={advertisement:e.ad.id,name:e.ad.jobRole};o.createSearch(t.u.affiliation,a).success(function(n){o.getSearch(t.u.affiliation,n.id).success(function(t){e.search=t.search,f()})})}})});var f=function(){e.search.criteria||(e.search.criteria=[]);for(var t=0;t<e.search.criteria.length;t++)e.search.criteria[t].displayName=e.displayNameCollection[e.search.criteria[t].name].name},m=function(){e.criterion={values:[],weight:1}};m();var p=function(){var n={name:e.search.name,criteria:e.search.criteria};o.editSearch(t.u.affiliation,e.search.id,n).success(function(){s.handleSuccess("Search updated successfully.")})};e.add=function(t){try{r.mustBeTrue(t.name,"Search criterion type is required"),r.mustBeTrue(t.values[0],"Search values should be defined"),e.displayNameCollection[t.name].isRange&&(r.mustBeTrue(t.values[1],"Search value range should be defined"),r.mustBeTrue(!_.find(e.search.criteria,function(t){return t.name===e.criterion.name}),"You can not specify multiple search criteria of this kind"))}catch(n){return}e.search.criteria.push({name:t.name,values:_.clone(t.values),displayName:e.displayNameCollection[t.name].name,weight:t.weight}),p(),m()},e.removeElement=function(e,t){e.splice(t,1),p()},e.doSearch=function(){d.go("results",{adId:n.adId,searchId:e.search.id})}}),controllers.controller("SearchResultsCtrl",function(e,t,n,a,i,o,s,r){function c(t){a.getAllResponses(n.u.affiliation,e.search.advertisement).success(function(e){for(var n=_.pluck(e.responses,"user"),a=_.pluck(t,"_id"),i=_.intersection(n,a),o=0;o<i.length;o++)for(var s=0;s<t.length;s++)i[o]!==t[s]._id||(t[s].invited=!0)})}e.forEmployer=!0,t.getSearchResults(n.u.affiliation,i.searchId).success(function(a){0!==a.scores.hits.hits.length?(t.getSearch(n.u.affiliation,i.searchId).success(function(t){e.search=t.search,c(a.scores.hits.hits)}),e.allResults=a.scores.hits.hits,e.showTop(10)):(e.allResults=[],r.handleInfo("No candidates found matching that criteria","Nothing to show!"))}),e.invite=function(t,n){a.createResponse(t,this.$parent.u.affiliation,i.adId,n).success(function(){e.user.invited=!0,r.handleSuccess("Candidate was invited successfully"),c(e.allResults)})},e.loadProfile=function(t,n){s.getProfile(t).success(function(a){e.user=a,e.user.id=t,e.user.invited=n})},e.showTop=function(t){e.limitResultsTo=t}}),controllers.controller("LogoutCtrl",["$scope","userService",function(e,t){t.logout()}]),controllers.controller("MeDashboardCtrl",["$scope","userService","$rootScope","notificationService","$modal","adResponseService",function(e,t,n,a,i,o){e.responses=[],e.hasActive=!1,e.hasInactive=!1,e.hasPending=!1;var s=function(e,t,n){o.editResponse(t.advertisement.organization._id,t.advertisement._id,t._id,e,null).success(function(){a.handleSuccess(n),r()})};e.accept=function(e){var t=i.open({templateUrl:"partials/modal_response_accept.html"});t.result.then(function(){s("accepted",e,"You have successfully accepted the invitation from"+e.advertisement.organization.name)})},e.reject=function(e){var t=i.open({templateUrl:"partials/modal_response_reject.html"});t.result.then(function(){s("withdrawn",e,"You have rejected the invitation from "+e.advertisement.organization.name)})},e.withdraw=function(e){var t=i.open({templateUrl:"partials/modal_response_withdraw.html"});t.result.then(function(){s("withdrawn",e,"You have withdrawn your application to "+e.advertisement.organization.name)})};var r=function(){t.getResponses().success(function(t){return 0===t.responses.length?void a.handleInfo("You do not have any active applications","No applications"):(e.responses={invited:[],active:[],inactive:[]},void _.each(t.responses,function(t){"invited"===t.status?e.responses.invited.push(t):"accepted"===t.status||"applied"===t.status?e.responses.active.push(t):("withdrawn"===t.status||"rejected"===t.status)&&e.responses.inactive.push(t)}))})};r()}]),controllers.controller("JobBoardCtrl",["$scope","adService","userService",function(e,t,n){e.ads=[],t.getAdsPublic().success(function(t){e.ads=t.ads}),n.getProfile().success(function(t){e.emptyProfile=0===t.tenures.length&&0===t.qualifications.length?!0:!1})}]),controllers.controller("NotificationsNavCtrl",["$scope","$rootScope","subwayService","notificationService","$location",function(e,t,n,a,i){e.markAsRead=function(e){n.markAsRead(e._id).success(function(e){t.$broadcast("refreshNotifications"),t.notifications=e})},t.$watch("notifications",function(){e.notifications=t.notifications}),e.goto=function(a){n.markAsRead(a._id).success(function(){t.$broadcast("refreshNotifications");var n=a.link,o=n.substring(n.indexOf("#")+1);i.url(o),e.$dismiss()})},e.notifications=t.notifications}]),controllers.controller("ResetPasswordCtrl",["$scope","userService","notificationService","validationService",function(e,t,n,a){e.submit=function(e){try{a.mustBeTrue(!!e,"Email cannot be empty")}catch(i){return}t.requestPasswordReset(e).success(function(){n.handleSuccess("A password reset link was sent to your email address")})}}]),controllers.controller("ChangePasswordCtrl",["$scope","userService","notificationService","validationService","$stateParams","$state",function(e,t,n,a,i,o){i.token&&(e.token=i.token),e.submit=function(i){try{a.mustBeTrue(!!i,"Password can not be empty"),a.mustBeTrue(e.password===e.passwordConfirmation,"Password confirmation was different that the password")}catch(s){return}t.changePassword(i,e.token).success(function(){n.handleSuccess(t.isLoggedIn()?"Your password had been changed successfully.":"Your password was changed. Please log in with the new password.")}),o.go("login")}}]),controllers.controller("ViewOrgProfileCtrl",function(e,t,n,a){e.org={_id:t.orgId},a.getOrg(t.orgId).success(function(t){e.org=t.organization}),a.getPublicAds(t.orgId).success(function(t){e.ads=t.advertisements})}),controllers.controller("LandingCtrl",function(e,t){var n=0,a=function(){n===s.length-1?n=0:n++},i=function(n){e.animateCss="animated fadeOutDown",t(n,500)},o=function(){e.animateCss="animated fadeInUp"},s=[{what:"faster"},{what:"easier"},{what:"by better companies"},{what:"without a CV"},{what:"for a better job"}],r=function(){i(function(){e.what=s[n].what,o(),a(),t(r,5e3)})};t(r,3e3),window.trackJs.configure({trackAjaxFail:!1})}),controllers.controller("AdminCtrl",function(e,t,n){t.refreshUsers=function(){e.updateUsers().success(function(){n.handleSuccess("Users are being updated. Check the logs.")})}}),controllers.controller("AdminUsersCtrl",function(e,t,n){e.lastUpdatedOn=angular.fromJson(n.adminUpdatedOn),t.getAllUsers().success(function(t){e.data=t,e.goodUsers=_.filter(t,function(e){return e.tenures.length+e.qualifications.length+e.skills.length>0})})}),controllers.controller("AdminInvitesCtrl",function(e,t,n){e.getUninvited=function(){t.getUninvited().success(function(t){e.data=t})},e.getUninvited(),e.inviteUser=function(a){t.sendInvitation(a).success(function(){n.handleSuccess("Invitation sent successfully."),e.getUninvited()})},e.declineUser=function(a){t.declineInvitation(a).success(function(){n.handleSuccess("Invitation declined."),e.getUninvited()})}}),controllers.controller("ProfileBuilderCtrl",function(e,t,n,a,i,o,s,r){e.linkedInLoaded=!1,e.endLoadingLinkedIn=function(){e.linkedInLoaded=!0},r(function(){e.linkedInLoaded||location.reload()},8e3);var c=null;e.start=function(){t.open({templateUrl:"partials/modal_yes_no.html",controller:function(e){e.question="Are you employed somewhere, or have been emplyed before?",e.yesOption="Yes, I have/had a job",e.noOption="No, I have never had a job before"}}).result.then(function(t){"yes"===t?(e.steps[0].fn=e.openTenureModal,c=!0):(e.steps[0].fn=e.openQualificationModal,c=!1),e.next()})},e.openTenureModal=function(){var n=t.open({templateUrl:"partials/modal_me_tenure.html",controller:"QualificationTenureModalInstanceCtrl",resolve:{data:function(){var t=e.steps[0].data;return t.meta={heading:"Tell us about your current job"},t}}});n.result.then(function(t){e.step.data=t,e.next()})},e.openQualificationModal=function(){var n=t.open({templateUrl:"partials/modal_me_qualification.html",controller:"QualificationTenureModalInstanceCtrl",resolve:{data:function(){var t=e.steps[0].data;return t.meta={heading:"Tell us about the qualification you are following"},t}}});n.result.then(function(t){e.step.data=t,e.next()})},e.openSkillModal=function(){var n=t.open({templateUrl:"partials/modal_me_skill.html",controller:"SkillModalInstanceCtrl",resolve:{data:function(){return{skills:e.steps[1].data.skills?e.steps[1].data.skills:[{name:null,experience:null}],meta:{heading:"What would you say your top 5 skills are?"}}}}});n.result.then(function(t){e.step.data=t,e.next()})},e.openDateOfBirthModal=function(){var n=t.open({templateUrl:"partials/modal_me_dateofbirth.html",controller:"PersonalModalInstanceCtrl",resolve:{data:function(){return e.steps[2].data}}});n.result.then(function(t){e.step.data=new Date(t.dateOfBirth),e.next()})},e.makeProfileFromSteps=function(){var t={tenures:c===!0?[e.steps[0].data]:[],qualifications:c===!1?[e.steps[0].data]:[],skills:e.steps[1].data,dateOfBirth:e.steps[2].data};e.save(t)},e.save=function(e){n.saveProfile(e).success(function(){a.handleSuccess("Profile Saved Successfully"),i.go("editProfile")})},e.skip=function(){i.go("editProfile")},e.steps=[{order:1,fn:e.openTenureModal,status:"init",data:{}},{order:2,fn:e.openSkillModal,status:"init",data:{}},{order:3,fn:e.openDateOfBirthModal,status:"init",data:{}},{order:4,fn:e.makeProfileFromSteps}],e.next=function(){e.step&&(e.step.status="done");var t=e.step?e.step.order+1:1;e.open(t)},e.open=function(t){e.step=e.steps[t-1],e.step.fn()},e.linkedIn=function(){function t(e){return e&&e.year?moment({years:e.year,months:e.month-1||0,days:e.day||1}):null}IN.API.Profile("me").fields(["educations","certifications","positions","date-of-birth","phone-numbers","skills"]).result(function(n){e.$apply(function(){if(0===n._total)return void a.handleError("Error retireving profile");var e=n.values[0],o={};o.dateOfBirth=t(e.dateOfBirth);var r=[];if(e.educations&&e.educations._total>0&&e.educations.values.forEach(function(e){var n={};n.name=e.degree,n.field=e.fieldOfStudy,n.issuedBy=e.schoolName,n.startedOn=t(e.startDate),n.endedOn=t(e.endDate),n.complete=null!==n.endedOn,r.push(n)}),e.certifications&&e.certifications._total>0&&e.certifications.values.forEach(function(e){var n={};n.name=e.name,n.field=null,n.issuedBy=e.authority,n.startedOn=t(e.startDate),n.endedOn=t(e.endDate),r.push(n)}),o.qualifications=r,e.phoneNumbers&&e.phoneNumbers._total>0){var c=_.find(e.phoneNumbers.values,function(e){return"mobile"===e.phoneType}).phoneNumber;c||(c=e.phoneNumbers.values[0].phoneNumber),o.contactNumber=c}var l=[];e.positions&&e.positions._total&&e.positions.values.forEach(function(e){var n={};n.organization=e.company.name,n.position=e.title,n.startedOn=t(e.startDate),n.endedOn=e.isCurrent?null:t(e.endDate),n.responsibilities=e.summary,l.push(n)}),o.tenures=l;var u=[];e.skills&&e.skills._total>0&&e.skills.values.forEach(function(e){u.push({name:e.skill.name,experience:1})}),o.skills=u,s.tempProfile=angular.toJson(o),i.go("editProfile")})})}}),controllers.controller("OrgMeCtrl",function(e,t,n){e.viewedByOrg=!0,t.getProfile(n.userId).success(function(t){e.user=t})}),controllers.controller("FriendShareCtrl",function(e,t,n,a){e.storeInvite=function(){e.invitations=!1;var i=[e.email1,e.email2],o=decodeURIComponent(t.referrer);n.sendInvitationReferrer(i,o).success(function(){e.invitations=!0,a.handleSuccess("Invitations will be sent soon to your friends.")})}});
"use strict";var directives=angular.module("kodiak.directives",[]);directives.directive("grAd",[function(){return{scope:!0,controller:function(e,t){e.postedOn=e.ad.postedOn,e.ad.description=t.trustAsHtml(e.ad.description),e.expiresOn=function(){return moment(e.ad.expiredOn).calendar()}},restrict:"A",templateUrl:"partials/template_ad.html"}}]),directives.directive("grVisualizedProfile",[function(){return{scope:!0,controller:function(e,t,r,i){e.view={getDuration:function(e,t){return e?(t||(t=Date.now()),{years:moment(t).diff(e,"years"),months:moment(t).diff(e,"months")%12}):void 0},currentYear:function(){return moment().year()},getTimesForDate:function(e,t){if(!e)return new Array(1);t||(t=Date.now());var r=2*moment(t).diff(moment(e),"years");return 0===r&&(r=1),new Array(Math.floor(r))},getTimes:i.getTimes,getTotalExperience:function(){if(!e.user||!e.user.tenures)return 0;var t=_.min(e.user.tenures,function(e){return new Date(e.startedOn).getTime()});return moment().year()-moment(t.startedOn).year()}}},restrict:"A",templateUrl:"partials/template_visualized_profile.html"}}]),directives.directive("grAvatar",[function(){return{scope:{email:"@",size:"@"},link:function(e,t,r){e.$watch(r,function(){r.email&&(t.context.src="http://www.gravatar.com/avatar/.jpg?s="+r.size)})},restrict:"A"}}]),directives.directive("grSubway",[function(){return{restrict:"A",controller:function(e,t,r,i,n){e.showNotifications=function(){n.open({templateUrl:"partials/modal_notifications.html",controller:"NotificationsNavCtrl"})}},templateUrl:"partials/template_subway_nav.html"}}]),directives.directive("amTimeAgo",["$window",function(e){return function(t,r,i){function n(){l&&(e.clearTimeout(l),l=null)}function o(t){r.text(t.fromNow(u));var i=e.moment().diff(t,"minute"),n=3600;1>i?n=1:60>i?n=30:180>i&&(n=300),l=e.setTimeout(function(){o(t)},1e3*n)}function a(){n(),o(e.moment(c,s))}var c,s,l=null,u=!1;t.$watch(i.amTimeAgo,function(e){return"undefined"==typeof e||null===e||""===e?(n(),void(c&&(r.text(""),c=null))):(angular.isNumber(e)&&(e=new Date(e)),c=e,void a())}),i.$observe("amFormat",function(e){s=e,c&&a()}),t.$on("$destroy",function(){n()})}}]),directives.directive("fileUploader",function(){return{restrict:"E",transclude:!0,template:'<input type="file" name="file" onchange="angular.element(this).scope().uploadFile(this.files)" enctype="multipart/form-data" accept={{acceptedtypes}} />',scope:"=",link:function(e,t,r){e.acceptedtypes=r.acceptedtypes;var i=t.find('input[type="file"]');i.bind("change",function(t){e.notReady=0===t.target.files.length,e.files=[];for(var r in t.target.files)"object"==typeof t.target.files[r]&&e.files.push(t.target.files[r])})}}}),directives.directive("grAdPreview",function(){return{restrict:"A",templateUrl:"partials/template_ad_preview.html",scope:{ads:"=ads",searchText:"=searchText",org:"=org"},controller:function(e,t){e.go=function(e){var r="object"==typeof e.organization?e.organization._id:e.organization;t.go("viewAdvertisementPublic",{orgId:r,adId:e._id})}}}}),directives.directive("grProfileError",function(){return{restrict:"A",template:'Please edit and correct these errors (or delete this section): <ul><li ng-repeat="error in errors">{{error}}</li></ul>',scope:{errors:"=errors"},controller:function(e,t){e.errors&&e.errors.length>0&&angular.element(t).parent().css("background-color","#f0b9b6")}}});
"use strict";angular.module("kodiak.filters",[]).filter("interpolate",["version",function(r){return function(e){return String(e).replace(/\%VERSION\%/gm,r)}}]);
"use strict";var services=angular.module("kodiak.services",[]);services.factory("userService",["$rootScope","$localStorage","$http","GRIZZLY_URL",function(t,e,n,r){var i=function(){var e=!!t.u.affiliation,n=t.u.expiration,r=t.u.restored;t.u.type=r&&e&&moment().isBefore(n)?"ORG":r&&!e&&n&&moment().isBefore(n)?"PERSONAL":"NEW",window.trackJs.configure({userId:t.u.email})},o={saveState:function(){e.user=angular.toJson(t.u)},restoreState:function(){t.u||(t.u={}),!t.u.restored&&e.user&&(t.u=angular.fromJson(e.user),t.u.restored=!0),i()},create:function(t){return n.put(r+"/user",JSON.stringify(t))},createOrgUser:function(t){return n.put(r+"/organization/user",JSON.stringify(t))},login:function(e,s){n.put(r+"/user/token",JSON.stringify(e)).success(function(n){t.u={_id:n._id,firstName:n.firstName,lastName:n.lastName,email:e.email,access_token:n.access_token,expiration:n.expiration,affiliation:n.affiliation,restored:!0,type:null},o.saveState(),i(),t.$broadcast("loggedIn",!!n.affiliation),s(null,n)}).error(function(t,e){s(e,t)})},isLoggedIn:function(){return t.u.access_token&&moment(t.u.expiration).isAfter(moment())?!0:!1},activate:function(t){return n.post(r+"/user/activate",JSON.stringify(t))},getProfile:function(t){return t||(t="me"),n.get(r+"/user/"+t+"/profile")},getProfileStats:function(){return n.get(r+"/user/me/profile/stats")},saveProfile:function(t){var e={profile:t};return n.post(r+"/user/me/profile",JSON.stringify(e))},getResponses:function(){return n.get(r+"/user/me/applications")},logout:function(){t.u={type:"NEW"},t.$broadcast("loggedOut"),o.saveState()},requestPasswordReset:function(t){return n.put(r+"/user/account/password/token",JSON.stringify({email:t}))},changePassword:function(e,i){return o.isLoggedIn()?n.post(r+"/user/"+t.u._id+"/account/password",JSON.stringify({password:e})):n.post(r+"/user/account/password",JSON.stringify({token:i,password:e}))},getQualifications:function(t){return n.get(r+"/user/meta/qualifications/"+t)},getQualificationFields:function(t){return n.get(r+"/user/meta/fields/"+t)}};return o}]),services.factory("orgService",["$http","GRIZZLY_URL","userService","$rootScope",function(t,e){var n={createOrg:function(n){return t.put(e+"/organization",JSON.stringify(n))},editOrg:function(n,r){return t.post(e+"/organization/"+n,JSON.stringify(r))},getOrg:function(n){return t.get(e+"/organization/"+n+"/public")},getAds:function(n){return t.get(e+"/organization/"+n+"/posts")},getPublicAds:function(n){return t.get(e+"/organization/"+n+"/public/posts")},uploadLogo:function(n,r){var i=new FormData;for(var o in r)r.hasOwnProperty(o)&&i.append("file_"+o,r[o]);return t({method:"PUT",url:e+"/organization/"+n+"/logo",data:i,headers:{"Content-Type":void 0},transformRequest:angular.identity})},getUsers:function(n){return t.get(e+"/organization/"+n+"/users")},deactivateUser:function(n,r){return t.delete(e+"/organization/"+n+"/user/"+r)}};return n}]),services.factory("adService",["$http","GRIZZLY_URL","userService",function(t,e){var n={createAd:function(n,r){return t.put(e+"/organization/"+n+"/post/",JSON.stringify(r))},editAd:function(n,r,i){return t.post(e+"/organization/"+n+"/post/"+r,JSON.stringify(i))},getAd:function(n,r){return t.get(e+"/organization/"+n+"/post/"+r)},getAdPublic:function(n,r){return t.get(e+"/organization/"+n+"/public/post/"+r)},getAdsPublic:function(){return t.get(e+"/ads/public")},deleteAd:function(n,r){return t.delete(e+"/organization/"+n+"/post/"+r)}};return n}]),services.factory("searchService",["$http","GRIZZLY_URL","userService",function(t,e){var n={createSearch:function(n,r){return t.put(e+"/organization/"+n+"/search/",JSON.stringify(r))},editSearch:function(n,r,i){return t.post(e+"/organization/"+n+"/search/"+r,JSON.stringify(i))},getSearch:function(n,r){return t.get(e+"/organization/"+n+"/search/"+r)},getSearchForAd:function(n,r){return t.get(e+"/organization/"+n+"/post/"+r+"/search")},getSearchResults:function(n,r){return t.get(e+"/organization/"+n+"/search/"+r+"/results")}};return n}]),services.factory("adResponseService",["$http","GRIZZLY_URL","userService",function(t,e){var n={createResponse:function(n,r,i,o){var s={user:n,tags:o};return t.put(e+"/organization/"+r+"/post/"+i+"/response",JSON.stringify(s))},editResponse:function(n,r,i,o,s){var a={status:o,tags:s};return t.post(e+"/organization/"+n+"/post/"+r+"/response/"+i,JSON.stringify(a))},getResponse:function(n,r,i){return t.get(e+"/organization/"+n+"/post/"+r+"/response/"+i)},getAllResponses:function(n,r){return t.get(e+"/organization/"+n+"/post/"+r+"/responses")}};return n}]),services.factory("subwayService",["$http","GRIZZLY_URL","userService",function(t,e){var n={getAllNotifications:function(){return t.get(e+"/user/notifications")},markAsRead:function(n){var r={isRead:!0};return t.post(e+"/user/notifications/"+n,JSON.stringify(r))},markAsUnread:function(n){var r={isRead:!1};return t.post(e+"/user/notifications/"+n,JSON.stringify(r))}};return n}]),services.factory("inviteService",function(t,e){return{inviteUser:function(n){return t.post(e+"/invite",{email:n})},sendInvitationReferrer:function(n,r){return t.post(e+"/invite/friends",{emails:n,referrer:r})}}}),services.factory("notificationService",[function(){return{notify:function(t){$.pnotify(t)},handleError:function(t,e){this.notify({title:e||"Something went wrong!",text:t||"Unknown Error",type:"error",hide:!0})},handleSuccess:function(t,e){this.notify({title:e||"Success!",text:t||"Everything went ok.",type:"success",hide:!0})},handleInfo:function(t,e){this.notify({title:e||"Oh!",text:t||"That's a no no, my friend!",type:"info",hide:!0})},handleWarning:function(t,e){this.notify({title:e||"Warning!",text:t||"That might cause problems, my friend!",type:"warning",hide:!0})}}}]),services.factory("validationService",["notificationService",function(t){return{mustBeTrue:function(e,n){if(!e)throw t.notify({title:"Ooops!",text:n,type:"info",hide:!0}),n}}}]),services.factory("adminService",function(t,e){return{getAllUsers:function(){return t.get(e+"/admin/users")},updateUsers:function(){return t.put(e+"/admin/updateusers")}}}),services.factory("utilService",[function(){return{getTimes:function(t){if(!t)return[];var e;try{e=Number(t)}catch(n){track("Invalid number in getTimes: "+t)}e=Math.floor(e);try{return new Array(e)}catch(n){return track("Got an array length of: "+e+" and an n: "+t),[]}}}}]);
var UserVoice=window.UserVoice||[];!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//widget.uservoice.com/2amM07LfE8e0RMlehyAftw.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(e,r)}(),UserVoice.push(["set",{accent_color:"#6aba2e",trigger_color:"white",trigger_background_color:"#e23a39"}]),UserVoice.push(["identify",{}]),UserVoice.push(["addTrigger",{mode:"contact",trigger_position:"bottom-right"}]),UserVoice.push(["autoprompt",{}]);