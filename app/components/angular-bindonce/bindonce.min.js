"use strict";angular.module("pasvaz.bindonce",[]).directive("bindonce",function(){var e=function(e){if(e&&e.length!==0){var t=angular.lowercase(""+e);e=!(t=="f"||t=="0"||t=="false"||t=="no"||t=="n"||t=="[]")}else{e=false}return e};var t=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);if(isNaN(t)){t=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10)}var n={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(n,r,i,s){var o=function(t,n,r){var i=n=="show"?"":"none";var s=n=="hide"?"":"none";t.css("display",e(r)?i:s)};var u=function(e,t){if(angular.isObject(t)&&!angular.isArray(t)){var n=[];angular.forEach(t,function(e,t){if(e)n.push(t)});t=n}if(t){e.addClass(angular.isArray(t)?t.join(" "):t)}};var a={watcherRemover:undefined,binders:[],group:i.boName,element:r,ran:false,addBinder:function(e){this.binders.push(e);if(this.ran){this.runBinders()}},setupWatcher:function(e){var t=this;this.watcherRemover=n.$watch(e,function(e){if(e==undefined)return;t.removeWatcher();t.runBinders()},true)},removeWatcher:function(){if(this.watcherRemover!=undefined){this.watcherRemover();this.watcherRemover=undefined}},runBinders:function(){var n,r;for(n=0,r=this.binders.length;n<r;n++){var i=this.binders[n];if(this.group&&this.group!=i.group)continue;var a=i.scope.$eval(i.interpolate?s(i.value):i.value);switch(i.attr){case"if":if(e(a)){i.transclude(i.scope.$new(),function(e){var t=i.element.parent();var n=i.element&&i.element[i.element.length-1];var r=t&&t[0]||n&&n.parentNode;var s=n&&n.nextSibling||null;angular.forEach(e,function(e){r.insertBefore(e,s)})})}break;case"hide":case"show":o(i.element,i.attr,a);break;case"class":u(i.element,a);break;case"text":i.element.text(a);break;case"html":i.element.html(a);break;case"style":i.element.css(a);break;case"src":i.element.attr(i.attr,a);if(t)i.element.prop("src",a);case"attr":angular.forEach(i.attrs,function(e,t){var n,r;if(t.match(/^boAttr./)&&i.attrs[t]){n=t.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();r=i.scope.$eval(i.attrs[t]);i.element.attr(n,r)}});break;case"href":case"alt":case"title":case"id":case"value":i.element.attr(i.attr,a);break}}this.ran=true;this.binders=[]}};return a}],link:function(e,t,n,r){var i=n.bindonce?e.$eval(n.bindonce):true;if(i!=undefined){r.runBinders()}else{r.setupWatcher(n.bindonce);t.bind("$destroy",r.removeWatcher)}}};return n});angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boIf",attribute:"if",transclude:"element",terminal:true,priority:1e3},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:true},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:true},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"}],function(e){var t=200;return angular.module("pasvaz.bindonce").directive(e.directiveName,function(){var n={priority:e.priority||t,transclude:e.transclude||false,terminal:e.terminal||false,require:"^bindonce",compile:function(t,n,r){return function(t,n,i,s){var o=i.boParent;if(o&&s.group!=o){var u=s.element.parent();s=undefined;var a;while(u[0].nodeType!=9&&u.length){if((a=u.data("$bindonceController"))&&a.group==o){s=a;break}u=u.parent()}if(!s){throw Error("No bindonce controller: "+o)}}s.addBinder({element:n,attr:e.attribute,attrs:i,value:i[e.directiveName],interpolate:e.interpolate,group:o,transclude:r,scope:t})}}};return n})})